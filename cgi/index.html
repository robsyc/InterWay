<!DOCTYPE html>
<html lang="en">

    <head>
        <title>InterWay</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Bootstrap styling in css folder -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
        
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <style>
            * {
              box-sizing: border-box;
            }
            
            body {
              font: 16px Arial;  
            }
            
            /*the container must be positioned relative:*/
            .autocomplete {
              position: relative;
              display: inline-block;
              width: 44%;
              margin-right: 5%;
            }
            
            input {
              border: 1px solid transparent;
              padding: 10px;
              font-size: 16px;
            }
            
            input[type=text] {
              width: 100%;
            }
            
            input[type=submit] {
              background-color: DodgerBlue;
              cursor: pointer;
            }
            
            .autocomplete-items {
              position: absolute;
              border: 1px solid #d4d4d4;
              border-bottom: none;
              border-top: none;
              z-index: 99;
              /*position the autocomplete items to be the same width as the container:*/
              top: 100%;
              left: 0;
              right: 0;
            }
            
            .autocomplete-items div {
              padding: 10px;
              cursor: pointer;
              background-color: #fff; 
              border-bottom: 1px solid #d4d4d4; 
            }
            
            /*when hovering an item:*/
            .autocomplete-items div:hover {
              background-color: #e9e9e9; 
            }
            
            /*when navigating through the items using the arrow keys:*/
            .autocomplete-active {
              background-color: DodgerBlue !important; 
              color: #ffffff; 
            }
            .add{
            cursor: pointer;
            }
        </style>
        <!-- autocomplete for start and end location cities -->
        <script>
            $(document).ready(function() {
                var i = 1;
                $('.add').on('click', function() {
                    // var field = '<br><div>Link URL '+i+': <input type="text" name="blog_linku_one[]"> &nbsp; Link Name '+i+':  <input type="text" name="blog_linkn_one[]"></div>';
                    //                       Link URL      : <input type="text" name="blog_linku_one[]"> &nbsp; Link Name      :  <input type="text" name="blog_linkn_one[]">


                    var field = `
                    <div class="form-group">
                        <div class="form-group autocomplete">
                            <label for="city">City: </label>
                            <input type="text" class="form-control" id="city_`+i+`" name="city_[]" value="Berlin">
                        </div>
                        <div class="form-group autocomplete">
                            <label for="days">Preference: </label>
                            <input type="number" class="form-control" id="days_`+i+`" name="days_[]" min="0" value="2">
                        </div>
                        <br><br>
                    </div>`;
                    $('.appending_div').append(field);
                    i = i+1;
                })
            });
        </script>
    </head>

    <body style="background-color:#e5ffdb;">
        <div class="container">
            <h1>InterWay</h1>
            <p class="lead">Mathematically optimize your Interrail trip!</p>
            <hr>
            <p>Please fill out your travel preferences :)</p>
            <br>

            <form action="cgi-bin/myPythonScript.py" method="post">
                <!-- Hyperparameters required from user
                - start location (select with autocomplete)
                - end location (select with autocomplete)
                - number of Interrail traveldays (radio buttons for options: 4, 5, 7, 10, or 15)
                - number of days to reach city (integer input)
                - city preferences (TODO)
                -->
                <div class="form-group autocomplete">
                    <label class="fw-bold" for="start">Start location: </label><br><br>
                    <input type="text" class="form-control" id="start" name="start" value="Brussels">
                </div>
                <div class="form-group autocomplete">
                    <label class="fw-bold" for="start">End location: </label><br><br>
                    <input type="text" class="form-control" id="end" name="end" value="Belgrade">
                </div>
                <br><br><br>
                <div class="form-group">
                    <label class="fw-bold" for="traveldays">Number of Interrail traveldays: </label>
                    <br><br>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="traveldays" id="inlineRadio_4" value="4">
                        <label class="form-check-label" for="inlineRadio_4">4</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="traveldays" id="inlineRadio_5" value="5">
                        <label class="form-check-label" for="inlineRadio_5">5</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="traveldays" id="inlineRadio_7" value="7">
                        <label class="form-check-label" for="inlineRadio_7">7</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="traveldays" id="inlineRadio_10" value="10">
                        <label class="form-check-label" for="inlineRadio_10">10</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="traveldays" id="inlineRadio_15" value="15">
                        <label class="form-check-label" for="inlineRadio_15">15</label>
                    </div>
                </div>
                <br><br>
                <div class="form-group">
                    <label class="fw-bold" for="days_to_reach">Number of days to reach destination city: </label>
                    <br><br>
                    <input type="number" class="form-control" id="days_to_reach" name="days_to_reach" min="0" value="2">
                </div>
                <br><br>
                <label class="fw-bold" for="city_preferences">City preferences: </label>
                <br><br>
                <div class="appending_div">
                    <div class="form-group">
                        <div class="form-group autocomplete">
                            <label for="city">City: </label>
                            <input type="text" class="form-control" id="city_[]" name="city_[]" value="Berlin">
                        </div>
                        <div class="form-group autocomplete">
                            <label for="days">Preference: </label>
                            <input type="number" class="form-control" id="days_[]" name="days_[]" min="0" value="2">
                        </div>
                        <br><br>
                    </div>
                </div>
                Add preference: <span class="fa fa-plus add"></span>


                <br><br>
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
            <script>
                function autocomplete(inp, arr) {
                  /*the autocomplete function takes two arguments,
                  the text field element and an array of possible autocompleted values:*/
                  var currentFocus;
                  /*execute a function when someone writes in the text field:*/
                  inp.addEventListener("input", function(e) {
                      var a, b, i, val = this.value;
                      /*close any already open lists of autocompleted values*/
                      closeAllLists();
                      if (!val) { return false;}
                      currentFocus = -1;
                      /*create a DIV element that will contain the items (values):*/
                      a = document.createElement("DIV");
                      a.setAttribute("id", this.id + "autocomplete-list");
                      a.setAttribute("class", "autocomplete-items");
                      /*append the DIV element as a child of the autocomplete container:*/
                      this.parentNode.appendChild(a);
                      /*for each item in the array...*/
                      for (i = 0; i < arr.length; i++) {
                        /*check if the item starts with the same letters as the text field value:*/
                        if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                          /*create a DIV element for each matching element:*/
                          b = document.createElement("DIV");
                          /*make the matching letters bold:*/
                          b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
                          b.innerHTML += arr[i].substr(val.length);
                          /*insert a input field that will hold the current array item's value:*/
                          b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
                          /*execute a function when someone clicks on the item value (DIV element):*/
                          b.addEventListener("click", function(e) {
                              /*insert the value for the autocomplete text field:*/
                              inp.value = this.getElementsByTagName("input")[0].value;
                              /*close the list of autocompleted values,
                              (or any other open lists of autocompleted values:*/
                              closeAllLists();
                          });
                          a.appendChild(b);
                        }
                      }
                  });
                  /*execute a function presses a key on the keyboard:*/
                  inp.addEventListener("keydown", function(e) {
                      var x = document.getElementById(this.id + "autocomplete-list");
                      if (x) x = x.getElementsByTagName("div");
                      if (e.keyCode == 40) {
                        /*If the arrow DOWN key is pressed,
                        increase the currentFocus variable:*/
                        currentFocus++;
                        /*and and make the current item more visible:*/
                        addActive(x);
                      } else if (e.keyCode == 38) { //up
                        /*If the arrow UP key is pressed,
                        decrease the currentFocus variable:*/
                        currentFocus--;
                        /*and and make the current item more visible:*/
                        addActive(x);
                      } else if (e.keyCode == 13) {
                        /*If the ENTER key is pressed, prevent the form from being submitted,*/
                        e.preventDefault();
                        if (currentFocus > -1) {
                          /*and simulate a click on the "active" item:*/
                          if (x) x[currentFocus].click();
                        }
                      }
                  });
                  function addActive(x) {
                    /*a function to classify an item as "active":*/
                    if (!x) return false;
                    /*start by removing the "active" class on all items:*/
                    removeActive(x);
                    if (currentFocus >= x.length) currentFocus = 0;
                    if (currentFocus < 0) currentFocus = (x.length - 1);
                    /*add class "autocomplete-active":*/
                    x[currentFocus].classList.add("autocomplete-active");
                  }
                  function removeActive(x) {
                    /*a function to remove the "active" class from all autocomplete items:*/
                    for (var i = 0; i < x.length; i++) {
                      x[i].classList.remove("autocomplete-active");
                    }
                  }
                  function closeAllLists(elmnt) {
                    /*close all autocomplete lists in the document,
                    except the one passed as an argument:*/
                    var x = document.getElementsByClassName("autocomplete-items");
                    for (var i = 0; i < x.length; i++) {
                      if (elmnt != x[i] && elmnt != inp) {
                        x[i].parentNode.removeChild(x[i]);
                      }
                    }
                  }
                  /*execute a function when someone clicks in the document:*/
                  document.addEventListener("click", function (e) {
                      closeAllLists(e.target);
                  });
                }
                
                /*An array containing all the country names in the world:*/
                var cities = ["Westport","Belfast","Dublin","Cork","Aberdeen","Glasgow","Edinburgh","York","London","Holyhead","Birmingham","Bristol","Penzance","Brussels","Amsterdam","Paris","Rennes","Lyon","Bordeaux","Montpellier","Hendaye","Marseille","Nice","Madrid","Barcelona","Valencia","Pamplona","Santander","Santiago","Sevilla","Vigo", "Granada", "Malaga","Lisbon","Porto","Faro","Rome", "Milan", "Genova", "Bologna", "Firenze", "Napoli","Bari", "Catania", "Venezia","Zurich","Basel","Bern","Köln","Hamburg", "Berlin", "München", "Frankfurt", "Praha","Copenhagen","Aarhus","Stockholm","Kiruna","Östersund","Oslo","Bergen","Trondheim","Bodø","Helsinki","Turku","Rovaniemi","Tallinn","Narva", "Tartu", "Viljandi", "Valga","Riga","Daugavpils","Liepaja","Vilnius","Kaunas","Klaipeda","Trakai","Warsaw","Krakow","Gdansk","Katowice","Przemysl","Poznan","Wien","Ljubljana","Zagreb","Split","Budapest","Belgrade","Bar","Skopje","Bucharest", "Cluj-Napoca", "Craiova","София", "Варна","Αθήνα", "Θεσσαλονίκη", "Πάτρα","Istanbul", "Ankara", "Eskisehir", "Konya"];
                
                /*initiate the autocomplete function on the "myInput" element, and pass along the countries array as possible autocomplete values:*/
                autocomplete(document.getElementById("start"), cities);
                autocomplete(document.getElementById("end"), cities);
                autocomplete(document.getElementById("city_[]"), cities);
                // autocomplete(document.getElementById("city_1"), cities);
                // autocomplete(document.getElementById("city_2"), cities);
                // autocomplete(document.getElementById("city_3"), cities);
                // autocomplete(document.getElementById("city_4"), cities);
                // autocomplete(document.getElementById("city_5"), cities);
            </script>

        </div>
    </body>
    <div class="container">
        <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
            <span class="text-muted">Programming for Bioinformatics - 2022</span>
            <span class="text-muted">Robbe Claeys</span>
            <a class="text-muted" href="https://github.com/robsyc"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
                <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a>
        </footer>
    </div>
</html>